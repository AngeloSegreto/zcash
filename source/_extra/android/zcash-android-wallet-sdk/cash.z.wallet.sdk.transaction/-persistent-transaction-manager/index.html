<HTML>
<HEAD>
<meta charset="UTF-8">
<title>PersistentTransactionManager - zcash-android-wallet-sdk</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">zcash-android-wallet-sdk</a>&nbsp;/&nbsp;<a href="../index.html">cash.z.wallet.sdk.transaction</a>&nbsp;/&nbsp;<a href="./index.html">PersistentTransactionManager</a><br/>
<br/>
<h1>PersistentTransactionManager</h1>
<code><span class="keyword">class </span><span class="identifier">PersistentTransactionManager</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-outbound-transaction-manager/index.html"><span class="identifier">OutboundTransactionManager</span></a></code>
<p>Facilitates persistent attempts to ensure that an outbound transaction is completed.</p>
<h3>Parameters</h3>
<p><a name="db"></a>
<code>db</code> - the database where the wallet can freely write information related to pending
transactions. This database effectively serves as the mempool for transactions created by this
wallet.</p>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<h4><a href="-init-.html">&lt;init&gt;</a></h4>
</td>
<td>
<p>Constructor that creates the database and then executes a callback on it.</p>
<code><span class="identifier">PersistentTransactionManager</span><span class="symbol">(</span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$<init>(android.content.Context, cash.z.wallet.sdk.transaction.TransactionEncoder, cash.z.wallet.sdk.service.LightWalletService, kotlin.String)/appContext">appContext</span><span class="symbol">:</span>&nbsp;<a href="https://developer.android.com/reference/android/content/Context.html"><span class="identifier">Context</span></a><span class="symbol">, </span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$<init>(android.content.Context, cash.z.wallet.sdk.transaction.TransactionEncoder, cash.z.wallet.sdk.service.LightWalletService, kotlin.String)/encoder">encoder</span><span class="symbol">:</span>&nbsp;<a href="../-transaction-encoder/index.html"><span class="identifier">TransactionEncoder</span></a><span class="symbol">, </span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$<init>(android.content.Context, cash.z.wallet.sdk.transaction.TransactionEncoder, cash.z.wallet.sdk.service.LightWalletService, kotlin.String)/service">service</span><span class="symbol">:</span>&nbsp;<a href="../../cash.z.wallet.sdk.service/-light-wallet-service/index.html"><span class="identifier">LightWalletService</span></a><span class="symbol">, </span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$<init>(android.content.Context, cash.z.wallet.sdk.transaction.TransactionEncoder, cash.z.wallet.sdk.service.LightWalletService, kotlin.String)/dataDbName">dataDbName</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a>&nbsp;<span class="symbol">=</span>&nbsp;"PendingTransactions.db"<span class="symbol">)</span></code>
<p>Facilitates persistent attempts to ensure that an outbound transaction is completed.</p>
<code><span class="identifier">PersistentTransactionManager</span><span class="symbol">(</span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$<init>(cash.z.wallet.sdk.db.PendingTransactionDb, cash.z.wallet.sdk.transaction.TransactionEncoder, cash.z.wallet.sdk.service.LightWalletService)/db">db</span><span class="symbol">:</span>&nbsp;<a href="../../cash.z.wallet.sdk.db/-pending-transaction-db/index.html"><span class="identifier">PendingTransactionDb</span></a><span class="symbol">, </span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$<init>(cash.z.wallet.sdk.db.PendingTransactionDb, cash.z.wallet.sdk.transaction.TransactionEncoder, cash.z.wallet.sdk.service.LightWalletService)/encoder">encoder</span><span class="symbol">:</span>&nbsp;<a href="../-transaction-encoder/index.html"><span class="identifier">TransactionEncoder</span></a><span class="symbol">, </span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$<init>(cash.z.wallet.sdk.db.PendingTransactionDb, cash.z.wallet.sdk.transaction.TransactionEncoder, cash.z.wallet.sdk.service.LightWalletService)/service">service</span><span class="symbol">:</span>&nbsp;<a href="../../cash.z.wallet.sdk.service/-light-wallet-service/index.html"><span class="identifier">LightWalletService</span></a><span class="symbol">)</span></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<h4><a href="abort-transaction.html">abortTransaction</a></h4>
</td>
<td>
<p>Remove a transaction and pretend it never existed.</p>
<code><span class="keyword">suspend</span> <span class="keyword">fun </span><span class="identifier">abortTransaction</span><span class="symbol">(</span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$abortTransaction(cash.z.wallet.sdk.entity.PendingTransaction)/existingTransaction">existingTransaction</span><span class="symbol">:</span>&nbsp;<a href="../../cash.z.wallet.sdk.entity/-pending-transaction/index.html"><span class="identifier">PendingTransaction</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="apply-mined-height.html">applyMinedHeight</a></h4>
</td>
<td>
<p>Given a transaction and the height at which it was mined, update the transaction to indicate
that it was mined.</p>
<code><span class="keyword">suspend</span> <span class="keyword">fun </span><span class="identifier">applyMinedHeight</span><span class="symbol">(</span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$applyMinedHeight(cash.z.wallet.sdk.entity.PendingTransaction, kotlin.Int)/pendingTx">pendingTx</span><span class="symbol">:</span>&nbsp;<a href="../../cash.z.wallet.sdk.entity/-pending-transaction/index.html"><span class="identifier">PendingTransaction</span></a><span class="symbol">, </span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$applyMinedHeight(cash.z.wallet.sdk.entity.PendingTransaction, kotlin.Int)/minedHeight">minedHeight</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="cancel.html">cancel</a></h4>
</td>
<td>
<p>Attempt to cancel a transaction.</p>
<code><span class="keyword">suspend</span> <span class="keyword">fun </span><span class="identifier">cancel</span><span class="symbol">(</span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$cancel(cash.z.wallet.sdk.entity.PendingTransaction)/pendingTx">pendingTx</span><span class="symbol">:</span>&nbsp;<a href="../../cash.z.wallet.sdk.entity/-pending-transaction/index.html"><span class="identifier">PendingTransaction</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="encode.html">encode</a></h4>
</td>
<td>
<p>Encode the pending transaction using the given spending key. This is a local operation that
produces a raw transaction to submit to lightwalletd.</p>
<code><span class="keyword">suspend</span> <span class="keyword">fun </span><span class="identifier">encode</span><span class="symbol">(</span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$encode(kotlin.String, cash.z.wallet.sdk.entity.PendingTransaction)/spendingKey">spendingKey</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$encode(kotlin.String, cash.z.wallet.sdk.entity.PendingTransaction)/pendingTx">pendingTx</span><span class="symbol">:</span>&nbsp;<a href="../../cash.z.wallet.sdk.entity/-pending-transaction/index.html"><span class="identifier">PendingTransaction</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../cash.z.wallet.sdk.entity/-pending-transaction/index.html"><span class="identifier">PendingTransaction</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="get-all.html">getAll</a></h4>
</td>
<td>
<p>Get all pending transactions known to this wallet as a flow that is updated anytime the list
changes.</p>
<code><span class="keyword">fun </span><span class="identifier">getAll</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Flow</span><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="../../cash.z.wallet.sdk.entity/-pending-transaction-entity/index.html"><span class="identifier">PendingTransactionEntity</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<h4><a href="init-spend.html">initSpend</a></h4>
</td>
<td>
<p>Initialize a spend with the main purpose of creating an idea to use for tracking it until
completion.</p>
<code><span class="keyword">suspend</span> <span class="keyword">fun </span><span class="identifier">initSpend</span><span class="symbol">(</span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$initSpend(kotlin.Long, kotlin.String, kotlin.String, kotlin.Int)/zatoshiValue">zatoshiValue</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html"><span class="identifier">Long</span></a><span class="symbol">, </span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$initSpend(kotlin.Long, kotlin.String, kotlin.String, kotlin.Int)/toAddress">toAddress</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$initSpend(kotlin.Long, kotlin.String, kotlin.String, kotlin.Int)/memo">memo</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$initSpend(kotlin.Long, kotlin.String, kotlin.String, kotlin.Int)/fromAccountIndex">fromAccountIndex</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../cash.z.wallet.sdk.entity/-pending-transaction/index.html"><span class="identifier">PendingTransaction</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="is-valid-shielded-address.html">isValidShieldedAddress</a></h4>
</td>
<td>
<p>Return true when the given address is a valid t-addr.</p>
<code><span class="keyword">suspend</span> <span class="keyword">fun </span><span class="identifier">isValidShieldedAddress</span><span class="symbol">(</span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$isValidShieldedAddress(kotlin.String)/address">address</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="is-valid-transparent-address.html">isValidTransparentAddress</a></h4>
</td>
<td>
<p>Return true when the given address is a valid z-addr.</p>
<code><span class="keyword">suspend</span> <span class="keyword">fun </span><span class="identifier">isValidTransparentAddress</span><span class="symbol">(</span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$isValidTransparentAddress(kotlin.String)/address">address</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="monitor-by-id.html">monitorById</a></h4>
</td>
<td>
<p>Generate a flow of information about the given id where a new pending transaction is emitted
every time its state changes.</p>
<code><span class="keyword">suspend</span> <span class="keyword">fun </span><span class="identifier">monitorById</span><span class="symbol">(</span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$monitorById(kotlin.Long)/id">id</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html"><span class="identifier">Long</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Flow</span><span class="symbol">&lt;</span><a href="../../cash.z.wallet.sdk.entity/-pending-transaction/index.html"><span class="identifier">PendingTransaction</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<h4><a href="submit.html">submit</a></h4>
</td>
<td>
<p>Submits the transaction represented by <a href="../-outbound-transaction-manager/submit.html#cash.z.wallet.sdk.transaction.OutboundTransactionManager$submit(cash.z.wallet.sdk.entity.PendingTransaction)/pendingTx">pendingTx</a> to lightwalletd to broadcast to the
network and, hopefully, include in the next block.</p>
<code><span class="keyword">suspend</span> <span class="keyword">fun </span><span class="identifier">submit</span><span class="symbol">(</span><span class="identifier" id="cash.z.wallet.sdk.transaction.PersistentTransactionManager$submit(cash.z.wallet.sdk.entity.PendingTransaction)/pendingTx">pendingTx</span><span class="symbol">:</span>&nbsp;<a href="../../cash.z.wallet.sdk.entity/-pending-transaction/index.html"><span class="identifier">PendingTransaction</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../cash.z.wallet.sdk.entity/-pending-transaction/index.html"><span class="identifier">PendingTransaction</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Companion Object Properties</h3>
<table>
<tbody>
<tr>
<td>
<h4><a href="-e-r-r-o-r_-e-n-c-o-d-i-n-g.html">ERROR_ENCODING</a></h4>
</td>
<td>
<p>Error code for an error while encoding a transaction</p>
<code><span class="keyword">const</span> <span class="keyword">val </span><span class="identifier">ERROR_ENCODING</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="-e-r-r-o-r_-s-u-b-m-i-t-t-i-n-g.html">ERROR_SUBMITTING</a></h4>
</td>
<td>
<p>Error code for an error while submitting a transaction</p>
<code><span class="keyword">const</span> <span class="keyword">val </span><span class="identifier">ERROR_SUBMITTING</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a></code></td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
